# 🚀 仪表盘图表检测系统 - 快速使用指南

## 📦 第一步：克隆项目

```bash
git clone https://github.com/Keria04/DashboradGrounding.git
cd DashboradGrounding
```

## 📥 第二步：下载模型文件（重要！）

由于模型文件较大（21.5MB），需要从百度网盘单独下载：

> 📦 **文件名**: `best.pt`  
> 🔗 **下载链接**: https://pan.baidu.com/s/1oVypGjXYjPzEvNgf2vtTzA  
> 🔑 **提取码**: `srp1`

**放置位置**：
```
DashboradGrounding/
└── experiments/
    └── yolov8s_phase1_improved/
        └── weights/
            └── best.pt  ← 把下载的文件放这里
```

> 💡 如果 `experiments/yolov8s_phase1_improved/weights/` 目录不存在，请手动创建

## 🔧 第三步：安装依赖

### Windows用户：

```bash
# 创建虚拟环境（推荐）
python -m venv .venv
.venv\Scripts\activate

# 安装GPU版本（如果有NVIDIA显卡）
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu121

# 安装其他依赖
pip install ultralytics gradio opencv-python numpy pillow pyyaml
```

### Mac/Linux用户：

```bash
# 创建虚拟环境
python3 -m venv .venv
source .venv/bin/activate

# 安装依赖
pip install -r requirements.txt
```

## 🌐 第四步：启动Web界面

### Windows：
```bash
# 双击运行
START_WEB_APP.bat
```

### Mac/Linux：
```bash
python scripts/web_app.py
```

浏览器会自动打开 `http://127.0.0.1:7860`

## 🎯 第五步：开始检测

1. **上传图片**：拖拽或点击上传仪表盘截图
2. **调整参数**（可选）：
   - 置信度阈值：0.10（默认）→ 降低可检测更多但可能有误检
   - IoU阈值：0.40（默认）
3. **点击"开始检测"**
4. **查看结果**：带标注的图片会显示检测到的所有图表

## 📊 检测效果说明

### ⭐⭐⭐⭐⭐ 检测优秀（推荐测试）
- Map（地图）
- Bar chart（柱状图）
- Bubble chart（气泡图）

### ⭐⭐⭐ 检测中等
- Card（卡片）
- Data table（数据表）
- Area chart（面积图）
- Scatter plot（散点图）

### ⭐ 检测较弱（建议降低置信度）
- Line chart（折线图）- 建议置信度0.05
- Heatmap（热力图）- 建议置信度0.05
- Pie chart（饼图）
- Radar chart（雷达图）

## ⚙️ 参数调整建议

| 场景 | 置信度 | IoU | 说明 |
|------|--------|-----|------|
| 默认检测 | 0.10 | 0.40 | 平衡精度和召回 |
| 检测折线图/热力图 | 0.05 | 0.35 | 提高召回率 |
| 减少误检 | 0.20 | 0.45 | 提高精度 |
| 密集图表 | 0.15 | 0.30 | 避免重叠 |

## ❓ 常见问题

### Q1: "找不到模型文件"
**A**: 确认 `best.pt` 已下载并放置在正确位置：
```
experiments/yolov8s_phase1_improved/weights/best.pt
```

### Q2: Web界面打不开
**A**: 确保安装了gradio：
```bash
pip install gradio>=4.0.0
```

### Q3: 检测速度很慢
**A**: 
- 如果有NVIDIA显卡，安装GPU版PyTorch
- 否则使用CPU（首次运行较慢，后续会快一些）

### Q4: 某些图表检测不到
**A**: 
- 降低置信度阈值到 0.05 或 0.03
- Line chart、Heatmap等需要更低的阈值
- 如果图片很大，可能需要缩小

### Q5: 检测框位置不准
**A**: 这是目前模型的局限性，可以通过：
- 收集更多训练数据
- 使用更大的模型（YOLOv8m）

## 📞 获取帮助

- **GitHub Issues**: https://github.com/Keria04/DashboradGrounding/issues
- **查看详细文档**: 项目根目录的 `README.md`

---

**版本**: v2.1  
**更新**: 2025-10-12  
**模型性能**: mAP50 = 51.2%

