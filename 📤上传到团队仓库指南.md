# 📤 上传到团队GitHub仓库指南

## 🎯 目标仓库

https://github.com/Keria04/DashboradGrounding

这是一个团队仓库，已有3个协作者（张悦菲、李昕凌、蔡怡乐、曹均杰）

---

## ⚠️ 重要前提

### 1. 确认您有权限

**检查方式**：
- 访问 https://github.com/Keria04/DashboradGrounding
- 如果能看到仓库内容，说明有读权限
- 需要确认是否有**写权限**（push权限）

**如果没有写权限**：
- 联系仓库所有者（Keria04）
- 请他们添加您为Collaborator：
  ```
  Repository → Settings → Collaborators → Add people
  ```

### 2. 获取GitHub Token

1. 登录GitHub
2. 右上角头像 → **Settings**
3. 左侧菜单最下方 → **Developer settings**
4. **Personal access tokens** → **Tokens (classic)**
5. **Generate new token (classic)**
6. 填写：
   - Note: `DashboradGrounding upload`
   - Expiration: 90 days
   - 勾选: ✅ **repo**（所有repo权限）
7. **Generate token**
8. **立即复制token**（只显示一次！保存好）

---

## 🚀 上传步骤（超简单）

### 方式1：一键上传（推荐）⭐⭐⭐⭐⭐

```bash
# 双击运行
上传到团队仓库.bat
```

**按提示操作**：
1. 等待Git配置完成
2. 按任意键继续
3. 输入GitHub凭据：
   - Username: `你的GitHub用户名`
   - Password: `粘贴Token`（不是密码！）
4. 等待上传完成（5-10分钟）

**完成！** ✅

---

### 方式2：手动命令（详细）

如果一键脚本遇到问题，可以手动运行命令：

#### 步骤1：初始化Git
```bash
git init
```

#### 步骤2：设置远程仓库
```bash
git remote add origin https://github.com/Keria04/DashboradGrounding.git
```

#### 步骤3：配置Git LFS
```bash
git lfs install
git lfs track "*.pt"
git add .gitattributes
```

#### 步骤4：拉取远程内容（合并现有代码）
```bash
git pull origin main --allow-unrelated-histories
```

**如果提示冲突**：
- 查看冲突文件
- 手动解决冲突
- 或创建新分支：`git checkout -b phase1-implementation`

#### 步骤5：添加您的代码
```bash
git add .
```

#### 步骤6：提交
```bash
git commit -m "Phase 1完成: YOLOv8s图表检测系统 (mAP50=51.2%)"
```

#### 步骤7：推送
```bash
git branch -M main
git push -u origin main
```

**输入凭据**：
- Username: 你的GitHub用户名
- Password: 粘贴Token

---

## 📋 上传内容说明

### 会上传到仓库的文件

```
DashboradGrounding/
├── src/                    # 您的源代码（合并到现有src/）
│   ├── data/
│   ├── models/
│   └── utils/
│
├── scripts/                # 新增的脚本文件夹
│   ├── web_app.py
│   ├── app_demo.py
│   └── ...
│
├── experiments/            # 训练结果
│   └── yolov8s_phase1_improved/
│       └── weights/
│           └── best.pt     # 21.5MB (Git LFS)
│
├── data/                   # 合并数据
│   ├── annotations/        # 现有标注（保留）
│   ├── raw/                # 只上传1张示例图
│   └── yolo_format/        # 新增YOLO格式
│
├── configs/                # 配置文件
├── ModelScope/             # 部署文件
├── README.md              # 更新项目说明
└── requirements.txt       # Python依赖
```

### 不会上传的文件（.gitignore）

```
❌ .venv/                  # 虚拟环境
❌ data/raw/*.png          # 278张原始图（太大）
❌ __pycache__/            # 缓存
❌ *.log                   # 日志
```

---

## 🔄 合并策略

### 如果仓库已有代码

您的代码会**合并**到现有仓库：

```
现有结构:
├── data/
│   ├── raw/（已有279张图）
│   └── annotations/（已有标注）
├── docs/
└── src/

合并后:
├── data/（保留现有+新增yolo_format）
├── docs/（保留现有）
├── src/（合并您的代码）
├── scripts/（新增）⭐
├── experiments/（新增）⭐
├── configs/（新增）⭐
├── ModelScope/（新增）⭐
└── README.md（更新）
```

### 如果有文件冲突

**自动合并**：Git会尽量自动合并

**如果有冲突**：
```bash
# 查看冲突文件
git status

# 手动编辑冲突文件
# 解决冲突后:
git add 冲突文件
git commit -m "解决合并冲突"
git push
```

---

## 💡 推荐的工作流程

### 选项A：直接推送到main（简单）

如果您是主要开发者：
```bash
上传到团队仓库.bat
```
直接推送到main分支

### 选项B：创建分支+Pull Request（规范）⭐

更规范的协作方式：

```bash
# 1. 创建新分支
git checkout -b phase1-yolo-implementation

# 2. 添加代码
git add .
git commit -m "Phase 1: YOLOv8s检测系统实现"

# 3. 推送到新分支
git push -u origin phase1-yolo-implementation

# 4. 在GitHub创建Pull Request
# 5. 请团队成员review
# 6. 合并到main分支
```

**优点**：
- ✅ 不直接修改main分支
- ✅ 团队成员可以review
- ✅ 可以讨论和改进
- ✅ 更专业的协作流程

---

## 🔧 需要团队配置的事项

### 1. 添加您为Collaborator（如果还没有）

需要仓库管理员（Keria04）操作：
```
Repository → Settings → Collaborators and teams
→ Add people → 输入您的GitHub用户名
→ 选择权限: Write（可以推送代码）
```

### 2. 配置Git LFS

仓库需要启用Git LFS支持：
```
Settings → Code and automation → Git LFS
```

### 3. 保护main分支（可选，推荐）

防止直接推送到main：
```
Settings → Branches → Add rule
→ Branch name pattern: main
→ 勾选: Require pull request reviews
```

---

## 📝 提交信息建议

### 好的提交信息示例

```
✅ Phase 1完成: YOLOv8s图表检测系统实现

功能:
- 20种图表类型检测
- Web界面 (Gradio)
- 命令行工具
- ModelScope部署文件

性能:
- mAP50: 51.2%
- Recall: 55.7%
- GPU训练加速

文件:
- scripts/web_app.py (Web界面)
- experiments/.../best.pt (训练模型)
- configs/ (训练配置)
```

---

## ⚡ 快速命令（复制粘贴）

```bash
# === 完整上传流程 ===

# 1. 初始化
git init

# 2. 添加远程仓库
git remote add origin https://github.com/Keria04/DashboradGrounding.git

# 3. 配置LFS
git lfs install
git lfs track "*.pt"

# 4. 拉取远程（合并现有代码）
git pull origin main --allow-unrelated-histories --no-edit

# 5. 添加您的代码
git add .

# 6. 提交
git commit -m "Phase 1完成: YOLOv8s检测系统 (mAP50=51.2%)"

# 7. 推送
git branch -M main
git push -u origin main
```

---

## 🎯 推荐方案（创建Pull Request）

### 更规范的提交方式

```bash
# 1-3步同上...

# 4. 创建新分支
git checkout -b feature/phase1-yolo-detector

# 5. 添加代码
git add .
git commit -m "Phase 1: YOLOv8s检测系统实现"

# 6. 推送到新分支
git push -u origin feature/phase1-yolo-detector

# 7. 在GitHub网页创建Pull Request
#    - 访问仓库页面
#    - 会提示 "Compare & pull request"
#    - 填写PR说明
#    - Create pull request

# 8. 请团队成员review

# 9. 合并到main
```

**优点**：
- ✅ 团队成员可以review代码
- ✅ 可以讨论和提建议
- ✅ 保持main分支稳定
- ✅ 有完整的历史记录

---

## 📂 建议的目录结构

上传后，团队仓库的结构建议：

```
DashboradGrounding/
├── data/
│   ├── raw/（原有的279张图）
│   ├── annotations/（原有的4个annotator标注）
│   └── yolo_format/（新增：YOLO格式数据）⭐
│
├── src/
│   ├── phase1/（新增：Phase 1相关代码）⭐
│   │   ├── models/
│   │   ├── data/
│   │   └── utils/
│   └── ...（原有代码）
│
├── scripts/（新增：可执行脚本）⭐
│   ├── web_app.py
│   ├── app_demo.py
│   └── ...
│
├── experiments/（新增：训练结果）⭐
│   └── yolov8s_phase1_improved/
│       └── weights/best.pt
│
├── configs/（新增：训练配置）⭐
├── ModelScope/（新增：部署文件）⭐
├── docs/（保留原有文档，可新增）
├── README.md（更新）
└── requirements.txt（更新）
```

---

## ✅ 上传检查清单

上传前确认：

- [ ] Git已安装
- [ ] Git LFS已安装
- [ ] 您有仓库的写权限（是Collaborator）
- [ ] 已获取Personal Access Token
- [ ] .gitignore已配置（不上传不必要的文件）
- [ ] 准备好提交信息

---

## 🎊 上传成功后

### 1. 验证上传

访问：https://github.com/Keria04/DashboradGrounding

检查：
- ✅ 您的代码文件夹出现
- ✅ best.pt显示LFS标记
- ✅ README更新

### 2. 通知团队

在仓库Issues或团队群聊中通知：
```
Hi team,

Phase 1的代码我已经上传了！

📂 新增内容:
- scripts/ (Web界面和检测工具)
- experiments/ (训练好的模型, mAP50=51.2%)
- configs/ (训练配置)
- ModelScope/ (部署文件)

🎯 功能:
- 20种图表检测
- Web界面演示
- 命令行批量处理

📖 使用说明:
见 README.md

请帮忙review和测试！
```

### 3. 创建Release（可选）

为Phase 1创建一个Release版本：
```
Repository → Releases → Create a new release
Tag: v1.0-phase1
Title: Phase 1: 图表检测系统
Description: 实现了基于YOLOv8的图表检测功能
```

---

## 🔄 后续更新

训练新模型或修改代码后：

```bash
# 1. 添加更改
git add .

# 2. 提交
git commit -m "更新: 提升mAP到55%"

# 3. 推送
git push

# 完成！
```

---

## 💡 协作建议

### 分支策略

```
main            # 稳定版本
├── develop     # 开发分支
│   ├── feature/phase1-detector
│   ├── feature/phase2-query
│   └── feature/ui-improvement
└── hotfix/     # 紧急修复
```

### 提交规范

```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式
refactor: 重构
test: 测试
chore: 构建/工具

例如:
feat: 添加Web界面
fix: 修复Line chart检测问题
docs: 更新README
```

---

## 🎯 立即开始

### 最简单方式（推荐）：

```
1. 双击: 上传到团队仓库.bat
2. 输入凭据
3. 完成！
```

### 需要Review方式：

```bash
# 创建分支
git checkout -b feature/phase1-yolo

# 推送
git push -u origin feature/phase1-yolo

# 在GitHub创建Pull Request
```

---

## 📞 遇到问题？

### 问题1：没有权限推送

**错误**：`Permission denied`

**解决**：
- 联系Keria04添加您为Collaborator
- 或Fork仓库，之后创建Pull Request

### 问题2：Token无效

**错误**：`Authentication failed`

**解决**：
- 重新生成Token
- 确保勾选了repo权限
- 使用Token作为密码（不是GitHub密码）

### 问题3：文件冲突

**错误**：`CONFLICT (content): Merge conflict in XXX`

**解决**：
```bash
# 查看冲突
git status

# 编辑冲突文件，解决冲突
# 然后:
git add 冲突文件
git commit -m "解决合并冲突"
git push
```

---

## 🎊 完成后的效果

您的代码会出现在：
```
https://github.com/Keria04/DashboradGrounding
```

团队成员可以：
- ✅ 查看您的代码
- ✅ 下载使用
- ✅ 提出建议
- ✅ 继续开发

---

**准备好了就运行 `上传到团队仓库.bat` 吧！** 🚀

需要权限或遇到问题，随时告诉我！

