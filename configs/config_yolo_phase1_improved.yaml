# ====================================================================
# Phase 1 ç«‹å³æ”¹è¿›é…ç½® - åŸºäºGPUè®­ç»ƒç»“æœä¼˜åŒ–
# ç›®æ ‡: å°†mAP50ä»48.3%æå‡è‡³52-55%
# æ”¹è¿›é‡ç‚¹: å¤šå°ºåº¦è®­ç»ƒ + ç½®ä¿¡åº¦ä¼˜åŒ– + å¢å¼ºç­–ç•¥è°ƒæ•´
# é¢„è®¡è®­ç»ƒæ—¶é—´: 15-20åˆ†é’Ÿ(GPU, 150è½®)
# ====================================================================

# æ•°æ®é…ç½®
data:
  yaml_path: "data/yolo_format/dashboard.yaml"
  image_dir: "data/raw"
  train_split: 0.8
  val_split: 0.2

# æ¨¡å‹é…ç½®
model:
  name: "yolov8s"  # ä¿æŒ11Må‚æ•°
  weights: "experiments/yolov8s_optimized/weights/best.pt"  # ğŸ”¥ ä»æœ€ä½³æ¨¡å‹æ¢å¤
  
  # ç±»åˆ«åˆ—è¡¨(20ä¸ª)
  chart_types:
    - "Area chart"
    - "Bar chart"
    - "Bubble chart"
    - "Calendar"
    - "Card"
    - "Combination chart"
    - "Data table"
    - "Donut chart"
    - "Heatmap"
    - "Line chart"
    - "Map"
    - "Number indicator"
    - "Percentage indicator"
    - "Pie chart"
    - "Radar chart"
    - "Sankey diagram"
    - "Scatter plot"
    - "Sunburst chart"
    - "Time Line"
    - "Tree chart"

# è®­ç»ƒè¶…å‚æ•° - Phase 1 æ”¹è¿›
training:
  epochs: 150  # ğŸ”¥ æ”¹è¿›1: ä»96ç»§ç»­åˆ°150è½®
  batch_size: 16  # ä¿æŒä¸å˜
  imgsz: 800  # ğŸ”¥ æ”¹è¿›2: æå‡åˆ†è¾¨ç‡ 640â†’800ï¼ˆå¯¹å°ç›®æ ‡æ›´å¥½ï¼‰
  
  # å¤šå°ºåº¦è®­ç»ƒ ğŸ”¥ æ”¹è¿›3: å¯ç”¨å¤šå°ºåº¦ï¼ˆä¹‹å‰æœªå¯ç”¨ï¼‰
  multi_scale: true
  scale_range: [0.5, 1.5]  # è®­ç»ƒæ—¶éšæœºç¼©æ”¾ 400-1200åƒç´ 
  
  # ä¼˜åŒ–å™¨é…ç½®
  optimizer: "AdamW"
  lr0: 0.0005  # ğŸ”¥ æ”¹è¿›4: é™ä½å­¦ä¹ ç‡ 0.001â†’0.0005
  lrf: 0.001  # æœ€ç»ˆå­¦ä¹ ç‡: lr0 * lrf
  momentum: 0.937
  weight_decay: 0.0005
  
  # å­¦ä¹ ç‡è°ƒåº¦
  warmup_epochs: 3  # é™ä½warmupï¼ˆå·²ç»è®­ç»ƒè¿‡äº†ï¼‰
  warmup_momentum: 0.8
  warmup_bias_lr: 0.1
  cos_lr: true  # ä½™å¼¦é€€ç«
  
  # æ—©åœç­–ç•¥
  patience: 50  # ğŸ”¥ æ”¹è¿›5: å¢åŠ è€å¿ƒ 30â†’50
  
  # è®¾å¤‡é…ç½®
  device: "cuda"  # GPUè®­ç»ƒ
  workers: 8
  
  # ä¿å­˜é…ç½®
  save_period: 10
  save_best: true
  
# æ•°æ®å¢å¼ºç­–ç•¥ - Phase 1 ä¼˜åŒ–
augmentation:
  # ğŸ”¥ æ”¹è¿›6: é™ä½å¢å¼ºå¼ºåº¦ï¼Œå‡å°‘å¯¹å°ç›®æ ‡çš„ç ´å
  
  # æ··åˆå¢å¼º
  mosaic: 1.0  # ä¿æŒæ‹¼æ¥
  mixup: 0.10  # é™ä½: 0.15 â†’ 0.10
  copy_paste: 0.5  # ä¿æŒ
  
  # å‡ ä½•å˜æ¢
  degrees: 10.0
  translate: 0.2
  scale: 0.8
  shear: 5.0
  perspective: 0.0005
  
  # ç¿»è½¬
  flipud: 0.0
  fliplr: 0.5
  
  # é¢œè‰²å¢å¼º - é™ä½å¼ºåº¦
  hsv_h: 0.03  # ğŸ”¥ é™ä½: 0.05 â†’ 0.03
  hsv_s: 0.7   # ğŸ”¥ é™ä½: 0.9 â†’ 0.7
  hsv_v: 0.4   # ğŸ”¥ é™ä½: 0.6 â†’ 0.4
  
  # é«˜çº§å¢å¼º
  auto_augment: "randaugment"
  erasing: 0.2  # ğŸ”¥ é™ä½: 0.4 â†’ 0.2ï¼ˆå‡å°‘å¯¹å°ç›®æ ‡çš„ç ´åï¼‰
  
  # æ–°å¢: å°ç›®æ ‡ä¿æŠ¤
  small_object:
    min_area: 32  # æœ€å°ç›®æ ‡é¢ç§¯(åƒç´ Â²)
    protect: true  # ä¿æŠ¤å°ç›®æ ‡ä¸è¢«erasingæ“¦é™¤

# æŸå¤±å‡½æ•°é…ç½®
loss:
  box: 7.5
  cls: 0.5
  dfl: 1.5
  
  # ç±»åˆ«æƒé‡ - ä¿æŒ
  class_weights:
    "Line chart": 3.0
    "Heatmap": 5.0
    "Scatter plot": 2.5
    "Pie chart": 4.0
    "Radar chart": 4.0
    "Timeline": 4.0
    "Area chart": 2.0
    "Card": 1.5

# NMSé…ç½® - è¿›ä¸€æ­¥ä¼˜åŒ–
nms:
  iou_threshold: 0.35  # ğŸ”¥ æ”¹è¿›7: é™ä½ 0.40 â†’ 0.35ï¼ˆå…è®¸æ›´å¤šæ¡†ï¼‰
  conf_threshold: 0.05  # ğŸ”¥ æ”¹è¿›8: å¤§å¹…é™ä½ 0.10 â†’ 0.05ï¼ˆæå‡å¬å›ç‡ï¼‰
  max_det: 300

# æ¨ç†é…ç½®
inference:
  confidence_threshold: 0.05  # ğŸ”¥ æ›´ä½çš„ç½®ä¿¡åº¦
  iou_threshold: 0.35
  max_detections: 100
  device: "cuda"
  half: false

# éªŒè¯é…ç½®
validation:
  batch_size: 16
  conf_threshold: 0.001  # éªŒè¯æ—¶ç”¨æœ€ä½é˜ˆå€¼
  iou_threshold: 0.6
  plots: true

# å®éªŒé…ç½®
experiment:
  name: "yolov8s_phase1_improved"
  project: "experiments"
  exist_ok: true
  
# å›è°ƒé…ç½®
callbacks:
  tensorboard: true
  save_plots: true
  verbose: true

# é«˜çº§é…ç½®
advanced:
  # Anchorä¼˜åŒ–ï¼ˆæœªæ¥æ·»åŠ ï¼‰
  anchor_t: 4.0
  
  # å°ç›®æ ‡ä¼˜åŒ–
  small_obj:
    min_size: 8  # æœ€å°ç›®æ ‡å°ºå¯¸
    
  # æ··åˆç²¾åº¦è®­ç»ƒ
  amp: true
  
  # æ¨¡å‹EMA
  ema: true
  ema_decay: 0.9999

# è°ƒè¯•é…ç½®
debug:
  log_interval: 10
  save_debug_images: false
  profile: false

# ====================================================================
# Phase 1 æ”¹è¿›æ€»ç»“:
# 
# 1. âœ… ä»best.ptæ¢å¤è®­ç»ƒï¼ˆEpoch 66çš„æœ€ä½³æƒé‡ï¼‰
# 2. âœ… å¯ç”¨å¤šå°ºåº¦è®­ç»ƒï¼ˆ800åŸºç¡€åˆ†è¾¨ç‡ï¼‰
# 3. âœ… é™ä½å­¦ä¹ ç‡ï¼ˆé¿å…è¿‡åº¦è®­ç»ƒï¼‰
# 4. âœ… å¢åŠ patienceï¼ˆå…è®¸æ›´å¤šæ—¶é—´æ”¶æ•›ï¼‰
# 5. âœ… é™ä½å¢å¼ºå¼ºåº¦ï¼ˆä¿æŠ¤å°ç›®æ ‡ï¼‰
# 6. âœ… é™ä½ç½®ä¿¡åº¦é˜ˆå€¼ï¼ˆ0.10 â†’ 0.05ï¼‰
# 7. âœ… é™ä½NMSé˜ˆå€¼ï¼ˆæå‡å¬å›ç‡ï¼‰
# 8. âœ… å°ç›®æ ‡ä¿æŠ¤æœºåˆ¶
#
# é¢„æœŸæå‡:
# - mAP50: 48.3% â†’ 52-55%
# - Recall: 51.8% â†’ 60-65%
# - Line chart: 25% â†’ 35-40%
# - Heatmap: 15% â†’ 20-25%
#
# è®­ç»ƒæ—¶é—´: çº¦20åˆ†é’Ÿ(GPU, 150è½®)
# ====================================================================

