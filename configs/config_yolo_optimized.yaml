# ====================================================================
# ä¼˜åŒ–çš„YOLOv8è®­ç»ƒé…ç½® - é’ˆå¯¹è–„å¼±ç±»åˆ«åŠ å¼º
# ç›®æ ‡: å°†æ•´ä½“mAPä»37.2%æå‡è‡³â‰¥60%
# é‡ç‚¹æ”¹è¿›: Line chart, Heatmap, Scatter plot, Cardå¬å›ç‡
# ====================================================================

# æ•°æ®é…ç½®
data:
  yaml_path: "data/yolo_format/dashboard.yaml"
  image_dir: "data/raw"
  train_split: 0.8
  val_split: 0.2

# æ¨¡å‹é…ç½®
model:
  name: "yolov8s"  # ğŸ”¥ å‡çº§: n(3M) â†’ s(11Må‚æ•°), æå‡å®¹é‡
  weights: "yolov8s.pt"  # ä½¿ç”¨æ›´å¤§çš„é¢„è®­ç»ƒæ¨¡å‹
  
  # ç±»åˆ«åˆ—è¡¨(20ä¸ª)
  chart_types:
    - "Area chart"
    - "Bar chart"
    - "Bubble chart"
    - "Calendar"
    - "Card"
    - "Combination chart"
    - "Data table"
    - "Donut chart"
    - "Heatmap"
    - "Line chart"
    - "Map"
    - "Number indicator"
    - "Percentage indicator"
    - "Pie chart"
    - "Radar chart"
    - "Sankey diagram"
    - "Scatter plot"
    - "Sunburst chart"
    - "Time Line"
    - "Tree chart"

# è®­ç»ƒè¶…å‚æ•° - é’ˆå¯¹å°ç›®æ ‡ä¼˜åŒ–
training:
  epochs: 200  # ğŸ”¥ å¢åŠ : 100 â†’ 200 (GPUè®­ç»ƒ)
  batch_size: 16  # ğŸ”¥ å¢åŠ : 8 â†’ 16 (GPUæ”¯æŒ)
  imgsz: 640  # ä¿æŒ640ï¼Œå¹³è¡¡é€Ÿåº¦ä¸ç²¾åº¦
  
  # å¤šå°ºåº¦è®­ç»ƒ ğŸ”¥ NEW
  multi_scale: true
  scale_range: [0.7, 1.3]  # å…è®¸Â±30%ç¼©æ”¾
  
  # ä¼˜åŒ–å™¨é…ç½®
  optimizer: "AdamW"  # è‡ªåŠ¨é€‰æ‹©
  lr0: 0.001  # ğŸ”¥ æå‡åˆå§‹å­¦ä¹ ç‡
  lrf: 0.001  # æœ€ç»ˆå­¦ä¹ ç‡: lr0 * lrf
  momentum: 0.937
  weight_decay: 0.0005
  
  # å­¦ä¹ ç‡è°ƒåº¦
  warmup_epochs: 5  # ğŸ”¥ å¢åŠ warmup
  warmup_momentum: 0.8
  warmup_bias_lr: 0.1
  cos_lr: true  # ğŸ”¥ å¯ç”¨ä½™å¼¦é€€ç«
  
  # æ—©åœç­–ç•¥
  patience: 30  # ğŸ”¥ å¢åŠ è€å¿ƒ: 20 â†’ 30
  
  # è®¾å¤‡é…ç½®
  device: "cuda"  # ğŸ”¥ æ”¹ä¸ºGPU (å¦‚æœå¯ç”¨)
  workers: 8  # ğŸ”¥ å¢åŠ æ•°æ®åŠ è½½çº¿ç¨‹
  
  # ä¿å­˜é…ç½®
  save_period: 10  # æ¯10è½®ä¿å­˜ä¸€æ¬¡
  save_best: true
  
# æ•°æ®å¢å¼ºç­–ç•¥ - å¤§å¹…å¢å¼º
augmentation:
  # ğŸ”¥ æ¿€è¿›å¢å¼ºç­–ç•¥ - é’ˆå¯¹å°ç›®æ ‡å’Œå›°éš¾æ ·æœ¬
  
  # æ··åˆå¢å¼º
  mosaic: 1.0  # ä¿æŒæ‹¼æ¥
  mixup: 0.15  # ğŸ”¥ NEW: å›¾åƒæ··åˆ(è½»åº¦)
  copy_paste: 0.5  # ğŸ”¥ NEW: å¤åˆ¶ç²˜è´´å°ç›®æ ‡
  
  # å‡ ä½•å˜æ¢
  degrees: 10.0  # ğŸ”¥ å¢åŠ æ—‹è½¬: 0 â†’ Â±10åº¦
  translate: 0.2  # ğŸ”¥ å¢åŠ å¹³ç§»: 0.1 â†’ 0.2
  scale: 0.8  # ğŸ”¥ å¢åŠ ç¼©æ”¾: 0.5 â†’ 0.8
  shear: 5.0  # ğŸ”¥ å¢åŠ å‰ªåˆ‡: 0 â†’ Â±5åº¦
  perspective: 0.0005  # ğŸ”¥ å¢åŠ é€è§†: 0 â†’ 0.0005
  
  # ç¿»è½¬
  flipud: 0.0  # ä»ªè¡¨ç›˜ä¸é€‚åˆä¸Šä¸‹ç¿»è½¬
  fliplr: 0.5  # ä¿æŒå·¦å³ç¿»è½¬
  
  # é¢œè‰²å¢å¼º - é’ˆå¯¹ä½å¯¹æ¯”åº¦
  hsv_h: 0.05  # ğŸ”¥ å¢å¼ºè‰²è°ƒ: 0.015 â†’ 0.05
  hsv_s: 0.9   # ğŸ”¥ å¢å¼ºé¥±å’Œåº¦: 0.7 â†’ 0.9
  hsv_v: 0.6   # ğŸ”¥ å¢å¼ºäº®åº¦: 0.4 â†’ 0.6
  
  # é«˜çº§å¢å¼º
  auto_augment: "randaugment"  # è‡ªåŠ¨å¢å¼º
  erasing: 0.4  # Random erasing (æ¨¡æ‹Ÿé®æŒ¡)
  
  # Albumentationså¢å¼º
  blur_limit: 7
  
# æŸå¤±å‡½æ•°é…ç½®
loss:
  box: 7.5  # è¾¹ç•Œæ¡†æŸå¤±æƒé‡
  cls: 0.5  # åˆ†ç±»æŸå¤±æƒé‡
  dfl: 1.5  # DFLæŸå¤±æƒé‡
  
  # ğŸ”¥ ç±»åˆ«æƒé‡ - é’ˆå¯¹å›°éš¾ç±»åˆ«
  class_weights:
    "Line chart": 3.0      # ğŸ”¥ æœ€éš¾æ£€æµ‹ï¼Œæƒé‡Ã—3
    "Heatmap": 5.0          # ğŸ”¥ æ ·æœ¬å°‘ï¼Œæƒé‡Ã—5
    "Scatter plot": 2.5     # ğŸ”¥ å›°éš¾ï¼Œæƒé‡Ã—2.5
    "Pie chart": 4.0        # ğŸ”¥ æ ·æœ¬å°‘ï¼Œæƒé‡Ã—4
    "Radar chart": 4.0      # ğŸ”¥ æ ·æœ¬å°‘ï¼Œæƒé‡Ã—4
    "Timeline": 4.0         # ğŸ”¥ æ ·æœ¬å°‘ï¼Œæƒé‡Ã—4
    "Area chart": 2.0       # ğŸ”¥ æ˜“æ··æ·†ï¼Œæƒé‡Ã—2
    "Card": 1.5             # ğŸ”¥ å¬å›ç‡ä½ï¼Œæƒé‡Ã—1.5

# NMSé…ç½® - å®½æ¾ç­–ç•¥æå‡å¬å›ç‡
nms:
  iou_threshold: 0.4  # ğŸ”¥ é™ä½: 0.45 â†’ 0.4 (å…è®¸æ›´å¤šé‡å æ¡†)
  conf_threshold: 0.10  # ğŸ”¥ å¤§å¹…é™ä½: 0.25 â†’ 0.10 (æå‡å¬å›ç‡)
  max_det: 300  # æœ€å¤šæ£€æµ‹300ä¸ªç›®æ ‡
  agnostic: false  # ç±»åˆ«ç›¸å…³NMS

# æ¨ç†é…ç½®
inference:
  confidence_threshold: 0.10  # ğŸ”¥ é™ä½ç½®ä¿¡åº¦
  iou_threshold: 0.4
  max_detections: 100
  device: "cuda"  # GPUæ¨ç†
  half: false  # FP16æ¨ç†(å¦‚æœGPUæ”¯æŒ)

# éªŒè¯é…ç½®
validation:
  batch_size: 16
  conf_threshold: 0.001  # éªŒè¯æ—¶ç”¨æ›´ä½é˜ˆå€¼
  iou_threshold: 0.6  # mAPè®¡ç®—çš„IoUé˜ˆå€¼
  plots: true  # ç”Ÿæˆå¯è§†åŒ–

# å®éªŒé…ç½®
experiment:
  name: "yolov8s_optimized"
  project: "experiments"
  exist_ok: true
  
# å›è°ƒé…ç½®
callbacks:
  tensorboard: true
  save_plots: true
  verbose: true

# é«˜çº§é…ç½®
advanced:
  # Anchorä¼˜åŒ– ğŸ”¥ NEW
  anchor_t: 4.0  # anchoråŒ¹é…é˜ˆå€¼
  
  # å°ç›®æ ‡ä¼˜åŒ–
  small_obj:
    min_size: 8  # æœ€å°ç›®æ ‡å°ºå¯¸(åƒç´ )
    ignore_threshold: 0.5
  
  # æ··åˆç²¾åº¦è®­ç»ƒ
  amp: true  # è‡ªåŠ¨æ··åˆç²¾åº¦(GPU)
  
  # æ¢¯åº¦ç´¯ç§¯
  accumulate: 1  # batch_sizeÃ—accumulate = æœ‰æ•ˆbatch
  
  # æ¨¡å‹EMA
  ema: true  # æŒ‡æ•°ç§»åŠ¨å¹³å‡
  ema_decay: 0.9999

# è°ƒè¯•é…ç½®
debug:
  log_interval: 10  # æ¯10ä¸ªbatchæ‰“å°ä¸€æ¬¡
  save_debug_images: false
  profile: false

# ====================================================================
# æ”¹è¿›è¯´æ˜:
# 1. æ¨¡å‹å‡çº§: YOLOv8n â†’ YOLOv8s (å‚æ•°é‡Ã—3.7)
# 2. è®­ç»ƒè½®æ•°: 100 â†’ 200
# 3. ç½®ä¿¡åº¦é˜ˆå€¼: 0.25 â†’ 0.10 (æå‡å¬å›ç‡)
# 4. æ•°æ®å¢å¼º: æ¿€è¿›ç­–ç•¥(mixup, copy_paste, æ›´å¼ºHSV)
# 5. ç±»åˆ«æƒé‡: å›°éš¾ç±»åˆ«æƒé‡Ã—2-5
# 6. GPUè®­ç»ƒ: å¯ç”¨CUDAåŠ é€Ÿ
# 7. å­¦ä¹ ç‡: å¢åŠ åˆå§‹å­¦ä¹ ç‡å’Œä½™å¼¦é€€ç«
# 8. å¤šå°ºåº¦è®­ç»ƒ: å¢å¼ºå°ºåº¦ä¸å˜æ€§
#
# é¢„æœŸæå‡:
# - Line chart: 8.9% â†’ 55%+
# - Heatmap: 0% â†’ 50%+
# - Scatter plot: 20.8% â†’ 50%+
# - Cardå¬å›ç‡: 31.5% â†’ 60%+
# - æ•´ä½“mAP50: 37.2% â†’ 60%+
# ====================================================================

