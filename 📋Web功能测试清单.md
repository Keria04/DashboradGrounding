# 📋 仪表盘图表检测系统 - 功能测试清单

## 🎯 测试目标

验证YOLOv8s Phase1改进版模型（mAP50=51.2%, Recall=55.7%）在真实场景下的检测效果。

---

## 📊 模型性能概况

### 整体性能
- **mAP50**: 51.2%（主要指标）
- **mAP50-95**: 40.3%（严格指标）
- **Precision**: 53.2%（准确率）
- **Recall**: 55.7%（召回率）

### 性能等级说明
- ⭐⭐⭐⭐⭐ 优秀（mAP ≥80%）
- ⭐⭐⭐⭐ 良好（mAP 60-80%）
- ⭐⭐⭐ 中等（mAP 40-60%）
- ⭐⭐ 较差（mAP 20-40%）
- ⭐ 很差（mAP <20%）

---

## 🔍 各图表类型测试清单

### 🟢 优秀类别（预期检测效果好）

#### 1️⃣ Map（地图）⭐⭐⭐⭐⭐
**预估性能**: mAP ~95%

**测试要求**：
- 准备图像数量：**3-5张**
- 每张包含Map数量：1-2个

**测试重点**：
- ✅ 是否能准确检测到地图
- ✅ 边界框是否完整包含地图区域
- ✅ 置信度是否高（应该>0.8）

**预期结果**：
- ✅ 检测率应该接近100%
- ✅ 边界框准确
- ✅ 置信度高

**如果失败**：
- 记录地图类型（世界地图/中国地图/区域地图）
- 记录地图样式（彩色/单色/3D）

---

#### 2️⃣ Bar chart（柱状图）⭐⭐⭐⭐⭐
**预估性能**: mAP ~85%

**测试要求**：
- 准备图像数量：**5-8张**
- 每张包含Bar chart数量：2-4个

**测试重点**：
- ✅ 横向柱状图vs纵向柱状图
- ✅ 单系列vs多系列柱状图
- ✅ 堆叠柱状图vs分组柱状图
- ✅ 颜色变化（单色/多色/渐变）

**预期结果**：
- ✅ 检测率应该>85%
- ✅ 不同样式都能识别

**如果失败**：
- 记录柱状图样式（横向/纵向/堆叠）
- 记录柱子数量（是否过多/过少）

---

#### 3️⃣ Bubble chart（气泡图）⭐⭐⭐⭐⭐
**预估性能**: mAP ~99%

**测试要求**：
- 准备图像数量：**2-3张**
- 每张包含Bubble chart数量：1-2个

**测试重点**：
- ✅ 气泡大小变化
- ✅ 气泡密度（稀疏/密集）

**预期结果**：
- ✅ 几乎100%检测率

---

### 🟡 良好类别（预期检测效果较好）

#### 4️⃣ Card（卡片）⭐⭐⭐⭐
**预估性能**: mAP ~60%，但**召回率低**（约35%）

**测试要求**：
- 准备图像数量：**5-8张**
- 每张包含Card数量：**5-10个**（重点测试大量Card）

**测试重点** ⚠️ **重要**：
- ⚠️ **小卡片是否漏检**（这是主要问题）
- ✅ 数字卡vs文字卡vs图标卡
- ✅ 不同尺寸的卡片
- ⚠️ 密集排列的卡片是否都能检测到

**预期结果**：
- ⚠️ 可能漏检约65%的卡片
- ✅ 检测到的卡片准确率高

**测试建议**：
- **降低置信度到0.05-0.08**（提高召回率）
- 记录漏检的卡片特征（大小/颜色/位置）

**重点观察**：
- 漏检率是否可接受
- 哪种卡片最容易漏检

---

#### 5️⃣ Donut chart（环形图）⭐⭐⭐⭐
**预估性能**: mAP ~58%

**测试要求**：
- 准备图像数量：**3-5张**
- 每张包含Donut chart数量：1-2个

**测试重点**：
- ✅ 完整环形vs半环形
- ✅ 单层vs多层环形图
- ✅ 不同颜色组合

**预期结果**：
- ✅ 检测率约60%
- ✅ 较准确

---

### 🟠 中等类别（预期检测效果一般）

#### 6️⃣ Data table（数据表）⭐⭐⭐
**预估性能**: mAP ~52%

**测试要求**：
- 准备图像数量：**4-6张**
- 每张包含Data table数量：1-3个

**测试重点**：
- ⚠️ 与Heatmap的区分（容易混淆）
- ✅ 不同表格样式（带边框/无边框）
- ✅ 表格大小（大表格vs小表格）

**预期结果**：
- ⚠️ 约50%检测率
- ⚠️ 可能误检为Heatmap

**重点观察**：
- 是否被误识别为其他类型
- 漏检的表格特征

---

#### 7️⃣ Area chart（面积图）⭐⭐⭐
**预估性能**: mAP ~48%

**测试要求**：
- 准备图像数量：**4-5张**
- 每张包含Area chart数量：1-2个

**测试重点** ⚠️ **容易与Line chart混淆**：
- ⚠️ 是否被误识别为Line chart
- ✅ 单系列vs多系列面积图
- ✅ 堆叠vs非堆叠

**预期结果**：
- ⚠️ 约50%可能被识别为Line chart
- ⚠️ 检测率约50%

**重点观察**：
- Area chart vs Line chart 区分能力
- 误识别比例

---

### 🔴 较差类别（预期检测效果差，重点测试）

#### 8️⃣ Scatter plot（散点图）⭐⭐⭐
**预估性能**: mAP ~38%

**测试要求**：
- 准备图像数量：**5-8张** ⭐ **重点测试**
- 每张包含Scatter plot数量：1-2个

**测试重点** ⚠️ **高优先级**：
- ⚠️ 稀疏散点图（点少）
- ⚠️ 密集散点图（点多）
- ⚠️ 小点vs大点
- ⚠️ 多组散点（不同颜色）

**建议置信度**：
- 先用0.10测试
- 如果漏检，降到**0.05**
- 记录不同阈值的效果

**预期结果**：
- ⚠️ 漏检率约60%
- ⚠️ 小点散点图可能完全检测不到

**重点记录**：
- [ ] 检测到的散点图特征（点大/点多/颜色鲜明）
- [ ] 漏检的散点图特征（点小/点少/颜色浅）
- [ ] 置信度0.10 vs 0.05的效果对比

---

#### 9️⃣ Line chart（折线图）⭐⭐ **最关键的测试** 🔥
**预估性能**: mAP ~32%（较差）

**测试要求**：
- 准备图像数量：**8-10张** ⭐⭐⭐ **最高优先级**
- 每张包含Line chart数量：2-4个

**测试重点** ⚠️ **极其重要**：
- 🔥 **细线条折线图**（最容易漏检）
- 🔥 **多条线重叠**
- 🔥 **线条颜色与背景接近**
- 🔥 **平滑曲线vs折线**
- 🔥 **带标记点vs无标记点**

**必须测试的置信度**：
- [ ] 0.10（默认）
- [ ] 0.05（推荐）
- [ ] 0.03（如果仍漏检）

**预期结果**：
- 🔴 漏检率约70%
- 🔴 细线条几乎检测不到
- 🔴 需要降低到0.03-0.05才能检测

**详细记录表格**：

| 图像编号 | Line chart数量 | 检测到（0.10） | 检测到（0.05） | 检测到（0.03） | 线条特征 | 备注 |
|---------|---------------|---------------|---------------|---------------|---------|------|
| 示例1 | 3 | 0 | 1 | 2 | 细线、浅色 | 漏检严重 |
| ... | ... | ... | ... | ... | ... | ... |

**重点观察**：
- 什么样的Line chart能检测到（粗线/鲜艳色）
- 什么样的Line chart检测不到（细线/浅色）
- 最优置信度阈值是多少

---

#### 🔟 Heatmap（热力图）⭐⭐ **高优先级测试** 🔥
**预估性能**: mAP ~22%（很差）

**测试要求**：
- 准备图像数量：**6-8张** ⭐⭐⭐ **高优先级**
- 每张包含Heatmap数量：1-2个

**测试重点** ⚠️ **容易与Data table混淆**：
- 🔥 **是否被误识别为Data table**
- 🔥 不同颜色方案（红蓝/彩虹/灰度）
- 🔥 网格密度（密集/稀疏）
- 🔥 是否有数值标注

**必须测试的置信度**：
- [ ] 0.10（默认）
- [ ] 0.05（推荐）
- [ ] 0.03（如果仍漏检）

**预期结果**：
- 🔴 漏检率约80%
- 🔴 可能被误识别为Data table
- 🔴 需要极低置信度（0.03）才可能检测

**详细记录**：

| 图像 | Heatmap数量 | 检测结果 | 误识别为 | 置信度 | 颜色方案 | 备注 |
|------|------------|---------|---------|--------|---------|------|
| ... | ... | 检测到/漏检 | Data table? | ... | 红蓝/彩虹 | ... |

**重点观察**：
- Heatmap vs Data table 混淆情况
- 哪种颜色方案容易检测
- 是否需要更多训练数据

---

### 🔴 样本不足类别（预期检测很差）

#### 1️⃣1️⃣ Pie chart（饼图）⭐
**预估性能**: mAP ~10%（很差，只有1个训练样本）

**测试要求**：
- 准备图像数量：**4-6张**
- 每张包含Pie chart数量：1-2个

**测试重点**：
- ⚠️ 完整饼图vs环形饼图
- ⚠️ 2-3块扇形vs多块扇形
- ⚠️ 3D效果vs平面

**预期结果**：
- 🔴 大概率检测不到（漏检率90%+）
- 🔴 即使降低置信度也可能无效

**建议置信度**：0.03-0.05

---

#### 1️⃣2️⃣ Radar chart（雷达图）⭐
**预估性能**: mAP ~10%（很差，只有1个训练样本）

**测试要求**：
- 准备图像数量：**3-5张**
- 每张包含Radar chart数量：1个

**测试重点**：
- ⚠️ 不同边数（三角/正方形/五边形/六边形）
- ⚠️ 单系列vs多系列

**预期结果**：
- 🔴 大概率检测不到

**建议置信度**：0.03

---

#### 1️⃣3️⃣ Percentage indicator（百分比指示器）⭐⭐
**预估性能**: mAP ~57%（中等，7个训练样本）

**测试要求**：
- 准备图像数量：**3-5张**
- 每张包含Percentage indicator数量：2-4个

**测试重点**：
- ✅ 环形进度条
- ✅ 线性进度条
- ✅ 大数字百分比显示

**预期结果**：
- ⚠️ 检测率约50-60%

---

## 📝 测试记录表格（建议填写）

### 通用测试表格

| 图像编号 | 图表类型 | 实际数量 | 检测到（0.10） | 检测到（0.05） | 漏检 | 误检 | 置信度范围 | 备注 |
|---------|---------|---------|---------------|---------------|------|------|-----------|------|
| test_001 | Bar chart | 3 | 3 | 3 | 0 | 0 | 0.65-0.82 | 完美 ✅ |
| test_002 | Line chart | 4 | 1 | 2 | 2 | 0 | 0.08-0.15 | 细线漏检 ⚠️ |
| test_003 | Heatmap | 2 | 0 | 0 | 2 | 0 | - | 完全漏检 🔴 |
| test_004 | Card | 8 | 3 | 5 | 3 | 0 | 0.06-0.25 | 漏检50% ⚠️ |
| ... | ... | ... | ... | ... | ... | ... | ... | ... |

---

## 🎯 测试优先级分配

### 🔥 高优先级（必须测试，至少10张图像）

1. **Line chart**（8-10张）- 已知问题，重点关注
2. **Heatmap**（6-8张）- 已知问题，重点关注
3. **Card**（5-8张）- 召回率低，测试漏检情况
4. **Scatter plot**（5-8张）- 性能一般

**总计**：24-34张图像

---

### 🟡 中优先级（建议测试，5-10张图像）

5. **Bar chart**（5张）- 验证优势类别
6. **Map**（3张）- 验证优势类别
7. **Area chart**（4张）- 测试与Line chart混淆
8. **Donut chart**（3张）

**总计**：15张图像

---

### 🟢 低优先级（可选测试，5张图像）

9. **Bubble chart**（2张）
10. **Data table**（3张）
11. **Pie chart**（3张）
12. **Radar chart**（2张）

**总计**：10张图像

---

## 🔍 测试场景设计

### 场景1：单一类型仪表盘
- 只包含一种图表类型
- 数量：3-5个
- **目的**：测试该类型的检测率

### 场景2：混合类型仪表盘
- 包含多种图表类型
- 例如：2个Bar + 2个Line + 3个Card
- **目的**：测试分类准确性

### 场景3：复杂密集仪表盘
- 包含10+个图表
- 各种类型混合
- **目的**：测试真实场景表现

### 场景4：小目标专项测试
- 专门测试小尺寸图表
- Line chart（细线）+ Scatter plot（小点）
- **目的**：验证小目标检测能力

---

## ⚙️ 参数调优测试

### 置信度阈值对比测试

**测试同一张图像，使用不同置信度**：

| 置信度 | 适用场景 | 预期效果 |
|--------|---------|---------|
| **0.25** | 大目标（Map, Bar chart） | 高精度，少误检，但可能漏检 |
| **0.10** | 通用场景（默认） | 平衡 |
| **0.05** | 小目标（Line, Scatter, Card） | 高召回，但误检增加 |
| **0.03** | 极难检测（Heatmap, Pie） | 最大召回，误检较多 |

**测试建议**：
- 对每种图表类型，测试3种置信度
- 记录最优置信度阈值

---

## 📊 输出结果关注重点

### 1. 检测数量统计

**关注**：
- 实际包含vs检测到的数量
- 漏检率 = (实际数量 - 检测数量) / 实际数量

**示例**：
```
图像包含: 5个Line chart
检测到: 2个Line chart
漏检率: (5-2)/5 = 60% ⚠️
```

---

### 2. 置信度分布

**关注**：
- 检测到的图表置信度范围
- 优秀类别：应该>0.7
- 困难类别：可能0.05-0.2

**示例**：
```
Bar chart: 0.85, 0.78, 0.92 ✅ 高置信度
Line chart: 0.08, 0.12 ⚠️ 低置信度（不稳定）
```

---

### 3. 误检情况

**关注**：
- 是否把A类型误识别为B类型
- 常见混淆对：
  - Area chart ↔ Line chart
  - Heatmap ↔ Data table
  - Donut chart ↔ Pie chart

**记录格式**：
```
实际: Line chart
检测为: Area chart
原因: 填充区域导致
```

---

### 4. 边界框质量

**关注**：
- 边界框是否完整包含图表
- 是否框得太大（包含过多背景）
- 是否框得太小（遗漏部分图表）

**评分**：
- ✅ 完美：紧密包裹图表
- 🟡 良好：略有多余或遗漏
- 🔴 较差：严重不准确

---

## 📋 测试报告模板

### 简化版测试反馈

```
测试人: _______________
测试日期: _______________
测试图像数: _______________

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 整体评价
   □ 优秀（满意度≥80%）
   □ 良好（满意度60-80%）
   □ 一般（满意度40-60%）
   □ 较差（满意度<40%）

2. 检测效果好的类别（至少检测70%）
   □ Map
   □ Bar chart
   □ Bubble chart
   □ Card
   □ 其他: _______________

3. 检测效果差的类别（漏检>50%）
   □ Line chart（细线）
   □ Heatmap
   □ Scatter plot（小点）
   □ Pie chart
   □ Radar chart
   □ 其他: _______________

4. 主要问题
   □ Line chart漏检严重
   □ Heatmap检测不到
   □ Card大量漏检
   □ 误识别情况多（Area ↔ Line）
   □ 其他: _______________

5. 建议的置信度阈值
   - Map/Bar chart: _____ (建议0.10)
   - Line chart: _____ (建议0.05)
   - Heatmap: _____ (建议0.03-0.05)
   - Card: _____ (建议0.05-0.08)

6. 总体建议
   □ 当前模型可以使用
   □ 需要改进Line chart检测
   □ 需要改进Heatmap检测
   □ 需要收集更多训练数据
   
7. 其他意见
   _________________________________________________

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 🎯 测试总结

### 推荐测试图像配比

**总计建议：40-50张测试图像**

| 类别 | 图像数量 | 优先级 | 预期效果 |
|------|---------|--------|---------|
| **Line chart** | 8-10 | 🔥 最高 | 差（32%） |
| **Heatmap** | 6-8 | 🔥 最高 | 很差（22%） |
| **Card** | 5-8 | 🔥 高 | 中等但漏检多 |
| **Scatter plot** | 5-8 | 🔥 高 | 一般（38%） |
| **Bar chart** | 5 | 🟡 中 | 优秀（85%） |
| **Map** | 3 | 🟡 中 | 优秀（95%） |
| **其他** | 8-10 | 🟢 低 | 中等 |

---

## 💡 测试建议

### 给测试者的提示

1. **准备测试环境**
   - 下载模型文件（百度网盘）
   - 安装依赖
   - 启动Web界面

2. **测试流程**
   - 先用默认参数（0.10）测试
   - 记录结果
   - 再降低到0.05重新测试
   - 对比效果

3. **重点关注**
   - Line chart和Heatmap（已知问题）
   - Card的漏检率
   - 误识别情况

4. **反馈内容**
   - 具体的漏检案例（截图）
   - 最优置信度阈值
   - 整体满意度评分

---

## 📞 反馈方式

**测试完成后，请反馈**：

1. 填写上方的测试报告模板
2. 截图典型的成功/失败案例
3. 提供测试图像（如果可以）
4. 建议改进方向

**反馈渠道**：
- Gitee Issues
- 团队群聊
- 邮件

---

**这份测试清单涵盖了所有重要测试点，帮助团队全面评估模型效果！** 📊

**重点测试Line chart和Heatmap，这两个是已知的薄弱环节！** 🔥

